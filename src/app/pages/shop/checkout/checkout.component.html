<main class="main">
    <molla-page-header title="Checkout" subtitle="Shop"></molla-page-header>
    <nav class="breadcrumb-nav">
        <div class="container">
            <ol class="breadcrumb">
                <li class="breadcrumb-item">
                    <a routerLink="/">Home</a>
                </li>
                <li class="breadcrumb-item">
                    <a routerLink="/shop/sidebar/3cols">Shop</a>
                </li>
                <li class="breadcrumb-item active">Checkout</li>
            </ol>
        </div>
    </nav>

    <div class="page-content">
        <div class="checkout">
            <div class="container">
                <form action="#">
                    <div class="row">
                        <div class="col-lg-9">
                            <h2 class="checkout-title">Billing Details</h2>
                            <div class="row">
                                <div class="col-sm-6">
                                    <label>First Name *</label>
                                    <input [(ngModel)]="info.firstName" type="text" class="form-control" name="name" required>
                                </div>

                                <div class="col-sm-6">
                                    <label>Last Name *</label>
                                    <input [(ngModel)]="info.lastName" type="text" class="form-control" name="lastName" required>
                                </div>
                            </div>

                            <div class="row">

                                <div class="col-sm-6">
                                    <label>Phone *</label>
                                    <input [(ngModel)]="info.telephone" name="phone" type="tel" name="tel" class="form-control" required>
                                </div>
                            </div>

                            <label>Email address *</label>
                            <input [(ngModel)]="info.email" type="email" name="email" class="form-control" required>
                        <div class="date-info">
                            <div role="group" class="radio" aria-label="Radio Buttons with Bootstrap 5">
                                <input  type="radio" style="display: none;" (click)="changeValue()" [checked]="selfPickup"  class="btn-check" id="btnradio1" autocomplete="off">
                                <label [ngClass]="{'button-color': selfPickup === true}" class="btn btn-outline-primary" style="font-size: larger;" for="btnradio1">Self-pickup</label>

                                <input  style="display: none;" type="radio" (click)="changeValue()" [checked]="!selfPickup" class="btn-check" id="btnradio2" autocomplete="off">
                                <label [ngClass]="{'button-color': selfPickup === false}" class="btn btn-outline-primary" style="font-size: larger;" for="btnradio2">Store-pickup</label>
                              </div>
                            <div *ngIf="this.selfPickup">
                              <ngb-datepicker class="date" #dp [minDate]="minDate" [(ngModel)]="model" name="date"  style="font-size: large;" (navigate)="date = $event.next"></ngb-datepicker>
                            </div>
                            <div *ngIf="!this.selfPickup">
                                <ngb-datepicker class="date" [minDate]="minDate" [markDisabled]="markDisabled" name="date"  #dp [(ngModel)]="model" style="font-size: large;" (navigate)="date = $event.next"></ngb-datepicker>
                              </div>
                            <div class="description">Choose a preferred pickup date for your order. <b>Self-pickup</b> is available on every day of the week. <b>Store-pickup</b> is available only on store opening days. 
                                <br>
                                <br>
                                <p>If you have chosen self-pickup but cannot pick up your order on that day, DON'T WORRY. Your order will still be there for you to be picked up the following days.</p>
                                <hr>
                            <p>If your pickup date is within the next 4 days, we may not have <b>Sourdough</b> on stock. If the selected Date is not available for Sourdough, we will communicate with you via email. Thanks for your understanding.</p></div>
        
                        </div>
                            <div class="form-group">
                                <div class="custom-control custom-checkbox mt-0 address-box">
                                    <input type="checkbox" class="custom-control-input" id="checkout-diff-address"
                                        (change)="formToggle($event)">
                                </div>
                                <div class="shipping-info" style="display: none;">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label>First name <abbr class="required"
                                                        title="required">*</abbr></label>
                                                <input [(ngModel)]="info.firstName" name="first" type="text" class="form-control" />
                                            </div>
                                        </div>

                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label>Last name <abbr class="required"
                                                        title="required">*</abbr></label>
                                                <input [(ngModel)]="info.lastName" name="lastname" type="text" class="form-control" />
                                            </div>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label>Company name (optional)</label>
                                        <input type="text" class="form-control" />
                                    </div>

                                    <div class="select-custom">
                                        <label>Country / Region <span class="required">*</span></label>
                                        <select name="orderby" class="form-control">
                                            <option value="" defaultValue="selected">Vanuatu</option>
                                            <option value="1">Brunei</option>
                                            <option value="2">Bulgaria</option>
                                            <option value="3">Burkina Faso</option>
                                            <option value="4">Burundi</option>
                                            <option value="5">Cameroon</option>
                                        </select>
                                    </div>

                                    <div class="form-group mb-1 pb-2">
                                        <label>Street address <abbr class="required" title="required">*</abbr></label>
                                        <input type="text" class="form-control"
                                            placeholder="House number and street name" />
                                    </div>

                                    <div class="form-group">
                                        <input type="text" class="form-control"
                                            placeholder="Apartment, suite, unit, etc. (optional)" />
                                    </div>

                                    <div class="form-group">
                                        <label>Town / City <abbr class="required" title="required">*</abbr></label>
                                        <input type="text" class="form-control" />
                                    </div>

                                    <div class="select-custom">
                                        <label>State / County <abbr class="required" title="required">*</abbr></label>
                                        <select name="orderby" class="form-control">
                                            <option value="" defaultValue="selected">NY</option>
                                            <option value="1">Brunei</option>
                                            <option value="2">Bulgaria</option>
                                            <option value="3">Burkina Faso</option>
                                            <option value="4">Burundi</option>
                                            <option value="5">Cameroon</option>
                                        </select>
                                    </div>

                                    <div class="form-group">
                                        <label>Postcode / ZIP <abbr class="required" title="required">*</abbr></label>
                                        <input type="text" class="form-control" />
                                    </div>
                                </div>
                            </div>

                            <!-- <label>Order notes (optional)</label>
                            <textarea class="form-control" cols="30" rows="4"
                                placeholder="Notes about your order, e.g. special notes"></textarea> -->
                        </div>
                        <aside class="col-lg-3">
                            <div class="summary">
                                <h3 class="summary-title">Your Order</h3>

                                <table class="table table-summary">
                                    <thead>
                                        <tr>
                                            <th>Product</th>
                                            <th>Total</th>
                                        </tr>
                                    </thead>

                                    <tbody>
                                        <tr *ngFor="let product of cartItems">
                                            <td><a
                                                    [routerLink]="['/product/default/'+ product.slug]">{{ product.name }}</a>
                                            </td>
                                            <td>{{ product.sum.toFixed( 2 ) | currency  }}</td>
                                        </tr>
                                        <tr class="summary-subtotal">
                                            <td>Subtotal:</td>
                                            <td>${{ (cartService.priceTotal | async).toFixed(2) }}</td>
                                        </tr>

                                        <tr class="summary-total">
                                            <td>Total:</td>
                                            <td>${{ (cartService.priceTotal | async).toFixed(2) }}</td>
                                        </tr>
                                    </tbody>
                                </table>

                                <molla-accordion adClass="accordion-summary" id="accordion-payment">
                                    <div class="card">
                                    </div>

                                    <div class="card">
                                        <div class="card-header" id="heading-5">
                                            <h2 class="card-title">
                                            </h2>
                                        </div>
                                        <div id="collapse-5" class="collapse" aria-labelledby="heading-5"
                                            data-parent="#accordion-payment">
                                            <div class="card-body">
                                                <img src="assets/images/payments-summary.png" alt="payments cards">
                                                Donec nec justo eget felis facilisis fermentum.Lorem
                                                ipsum dolor sit amet, consectetuer adipiscing elit. Donec odio. Quisque
                                                volutpat mattis eros. Lorem ipsum dolor sit ame.
                                            </div>
                                        </div>
                                    </div>
                                </molla-accordion>



                                <button type="button" [disabled]="checkValidity()" (click)="handleBuy()" class="btn btn-outline-primary-2 btn-order btn-block">
                                    <span class="btn-text">Place Order</span>
                                    <span class="btn-hover-text" >Proceed to Checkout</span>
                                </button>
                                <p *ngIf="!valid">{{errorMessage}}</p>
                            </div>
                        </aside>
                    </div>
                </form>
            </div>
        </div>
    </div>
</main>